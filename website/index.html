<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="home.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
</head>
<body>
    <script>
        loadingflag = false;

        async function getSearchResults(stringVal) {
            searchUrl = "http://192.168.0.171:5000/search-by-name";
            bodyData = {
                'name': stringVal,
                'queryType': ''
            };
            try {
                loadingflag = true;
                const response = await fetch(searchUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(bodyData)
                });
                loadingflag = false;
                if(!response.ok) {
                    throw new Error(`HTTP Error! Status: ${response.status}`)
                }
                else {
                    const data = await response.json();
                    console.log(JSON.stringify(data, null, 2))
                }

            }
            catch(error) {
                console.log("Error : ", error)
            }
        }

        function goToMovieDetails(id) {
            url="./movieDetails.html"
            window.open(url, '_self')
        }

        function searchButtonClick() {
            getSearchResults('Jain');
        }
    </script>

    <!-- Home Page -->
    <header>
        <h1>Movie Suggestion System</h1>
    </header>

    <div class="container">
        <div class="search-section">
            <input type="text" placeholder="Search for a movie...">
            <button onclick="searchButtonClick()">Search</button>
        </div>

        <div id="searchResultsContainer"></div>

        <div id="search-loading"></div>

        <!-- Add more movie cards as needed -->
    </div>

    <script>
        var movies = [
            {
                "_id": 1234,
                "title": "Sample Movie Title",
                "actor": ['actor_1', 'actor_2', 'actor_3'],
                "genres": ['genre_1', 'genre_2', 'genre_3'],
                "originalLanguage": 'en',
                "releaseYear": 2020
            }
        ]
        const searchResultsContainer = document.getElementById('searchResultsContainer');
        if(movies.length>0) {
            movies.forEach(element => {
            const div = document.createElement('div');
            div.className = 'movie-card';
            div.addEventListener('click', () => {
                goToMovieDetails(element._id);
            })
            div.innerHTML = `
                <img src="{item.poster|| 'image/istockphoto-453554783-612x612.jpg'}" alt="">
                <div class="movie-details">
                    <div class="movie-title">${element.title}</div>
                    <div class="movie-year">Release Year: ${element.releaseYear}</div>
                    <div class="movie-language">Language: ${element.originalLanguage}</div>
                </div>
            `;
            searchResultsContainer.appendChild(div);
        });
        }
        else {
            const div = document.createElement('div');
            div.className = "empty-state-search"
            div.innerHTML = `
                <div> </div>
                    You have no results to be displayed for this search
                <div> </div>
            `
        }

   
    </script>
<script>
   <div>
    <image></image>
   </div>
</script>
</body>
</html>
